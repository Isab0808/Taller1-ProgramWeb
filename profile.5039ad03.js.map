{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,yBCAAD,EAAAC,EAAA,qBDIA,MAAMC,EAAqBC,SAASC,eAAe,eAC7CC,EAAuBF,SAASC,eAAe,iBASrDE,eAAeC,EAASC,GAEpB,MAAMC,QCbVH,eAAuBI,GACnB,MAAMC,EAASC,EAAAC,IAAIb,EAAAc,GAAG,QAAQJ,GAE9B,IACI,MACMD,SADgBG,EAAAG,OAAOJ,IACRF,OAErB,OADAO,QAAQC,IAAIR,GACLA,EACT,MAAOS,GACLF,QAAQC,IAAIC,IDIGC,CAAQX,GACrBY,QCDVd,eAA8Be,GAC1B,MAAMV,EAASC,EAAAU,WAAWtB,EAAAc,GAAG,QAE7B,IACI,MApBRS,KAoBeA,SAAcX,EAAAY,QAAQb,GASvBc,EAPOF,EAAKG,KAAKb,IACZ,IACAA,EAAIJ,OACPC,GAAIG,EAAIH,OAIQiB,QAAOlB,GAAQA,EAAKD,SAAWa,IAGvD,OADAL,QAAQC,IAAIQ,GACLA,EACT,MAAOP,GACLF,QAAQC,IAAIC,IDjBSU,CAAcpB,IAW3C,SAAoBa,GAChBnB,EAAmB2B,UAAY,mCAKlCR,EAAAS,4CAEQT,EAAAU,wEAZLC,CALa,IACNvB,EACHC,GAAIF,IAIKY,EAkBRa,SAAAC,IAEL7B,EAA0C8B,qBAW9BC,SAITF,EAAA/B,SAAAkC,cAED,YACFH,EAAAI,UAAa,QAEhBJ,EAAAL,UAAA,4EAMOO,EAAA1B,qYA1BsC6B,CAAAL","sources":["scripts/profile.js","scripts/getUser.js"],"sourcesContent":["import { db, auth } from \"./app\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport {getUser, getUserOrders} from \"./getUser\";\r\n\r\nconst productInfoArticle = document.getElementById(\"profileInfo\");\r\nconst productOrdersArticle = document.getElementById(\"profileOrders\");\r\n\r\nfunction getParam(param){\r\n    const url = window.location.search;\r\n    const searchParams = new URLSearchParams(url);\r\n    const productId = searchParams.get(param);\r\n    return productId;\r\n}\r\n\r\nasync function loadUser(userId){\r\n    \r\n    const data = await getUser(userId);\r\n    const dataOrders = await getUserOrders(userId);\r\n\r\n    const user = {\r\n        ...data,\r\n        id: userId,\r\n    }\r\n\r\n    renderUser(user);\r\n    renderOrders(dataOrders);\r\n}\r\n\r\nfunction renderUser(user){\r\n    productInfoArticle.innerHTML = `\r\n    <h1 class=\"profile__name\">${user.name}</h1>\r\n    <p class=\"profile__email\">${user.email}</p>\r\n    <h2 class=\"profile__orders\"> Order History </h2>\r\n    `;\r\n}\r\n\r\nfunction renderOrders(orders){\r\n    orders.forEach(order => {\r\n        productOrdersArticle.appendChild(renderOrder(order));\r\n    })\r\n    \r\n}\r\n\r\nfunction renderOrder(item){\r\n\r\n    const order = document.createElement(\"a\");\r\n    order.className = \"order\";\r\n\r\n    \r\n    order.innerHTML = `\r\n    <h2 class=\"order__title\">Order Info</h2>\r\n    <p class=\"order__id\">${item.id}</p>\r\n    <p class=\"order__total\"> XXXXX </p>\r\n    <h2 class=\"order__details\">Order Products</h2>\r\n    <section class=\"order__products\" id=\"order__products__${item.id}\">\r\n    ${item.cart.map(item => {\r\n        return `<div class=\"order__product\">\r\n            <h3 class=\"order__product__name\">${item.name}</h3>\r\n            <p class=\"order__product__price\">${item.price}</p>\r\n        </div>`\r\n    })}\r\n    </section>\r\n    `;\r\n    return order;\r\n    \r\n}\r\n\r\n\r\n\r\nonAuthStateChanged(auth, async (user) => {\r\n    if(user) {\r\n        loadUser(user.uid);\r\n\r\n    } else{\r\n        window.location.href = \"login.html\"\r\n    }\r\n})","import {db} from \"./app\";\r\nimport {doc, collection, getDoc, getDocs} from \"firebase/firestore\";\r\n\r\nasync function getUser(id){\r\n    const docRef = doc(db,\"users\",id);\r\n\r\n    try {\r\n        const docSnap = await getDoc(docRef);\r\n        const data = docSnap.data();\r\n        console.log(data);\r\n        return data;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nasync function getUserOrders( user){\r\n    const docRef = collection(db,\"cart\");\r\n\r\n    try {\r\n        const {docs} = await getDocs(docRef);\r\n\r\n        const data = docs.map((doc) => {\r\n            return {\r\n                ...doc.data(),\r\n                id: doc.id,\r\n            }\r\n        });\r\n        \r\n        const dataFilter = data.filter(data => data.userId === user);\r\n\r\n        console.log(dataFilter);\r\n        return dataFilter;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport {\r\n    getUser,\r\n    getUserOrders,\r\n}"],"names":["$2mFfu","parcelRequire","$095c3c4728a59b4f$var$productInfoArticle","document","getElementById","$095c3c4728a59b4f$var$productOrdersArticle","async","$095c3c4728a59b4f$var$loadUser","userId","data","id","docRef","$etBjH","doc","db","getDoc","console","log","error","$267b6c0e2ec92592$export$7cbf767827cd68ba","dataOrders","user","collection","docs","getDocs","dataFilter","map","filter","$267b6c0e2ec92592$export$6d123199b9876d55","innerHTML","name","email","$095c3c4728a59b4f$var$renderUser","forEach","order","appendChild","item1","createElement","className","$095c3c4728a59b4f$var$renderOrder"],"version":3,"file":"profile.5039ad03.js.map"}