var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},c=e.parcelRequire0c07;null==c&&((c=function(e){if(e in t)return t[e].exports;if(e in n){var c=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,c.call(r.exports,r,r.exports),r.exports}var d=new Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(e,t){n[e]=t},e.parcelRequire0c07=c);var r=c("2mFfu"),d=c("1tHc5"),o=c("etBjH");var a=c("1ZESu"),i=c("7Jg0N");o=c("etBjH"),c("aYguL");var s=c("3iQ2G");const u=document.getElementById("products"),l=document.getElementById("extra"),p=document.getElementById("category"),m=document.getElementById("order"),_=document.getElementById("order-review");let f,g=[],v=[];async function b(){const e=await async function(e){const t=o.collection(e,"products");try{const{docs:e}=await o.getDocs(t);return e.map((e=>({...e.data(),id:e.id})))}catch(e){console.log(e)}}(r.db);u.innerHTML="",e.forEach((e=>{h(e)})),g=e}function h(e){const t=document.createElement("a");t.className="product",t.setAttribute("href",`./product.html?id=${e.id}`);const n=e.images?e.images[0]:"https://cdn1.iconfinder.com/data/icons/business-company-1/500/image-512.png",c=v.some((t=>t.id===e.id))?'<button class="product__cart" disabled>Producto a単adido</button>':'<button class="product__cart">A単adir al carrito</button>';t.innerHTML=`\n    <img src="${n}" alt="" class="product__image">\n    <div class="product__info">\n        <p class="product__category">${e.category}</p> \n        <h2 class="product__name">${e.name}</h2>\n        <p class="product__review"> Review: ${e.review}</p> \n        <h3 class="product__price">${i.currencyFormat(e.price)}</h3>\n        ${f&&f.isAdmin?'<button class="product__edit" >Editar Producto</button> <button class="product__cart" disabled>Producto a単adido</button>':c}\n        ${f&&f.isAdmin?'<button class="product__delete">X</button>':""}\n    </div>\n    `,u.appendChild(t);const d=t.querySelector(".product__cart"),s=t.querySelector(".product__edit"),l=t.querySelector(".product__delete");d.addEventListener("click",(async t=>{t.preventDefault(),v.push(e),i.addProductToCart(v),f&&await a.createFirebaseCart(r.db,f.uid,v),d.setAttribute("disabled",!0),d.innerText="Producto a単adido"})),f&&f.isAdmin&&(s.addEventListener("click",(async t=>{t.preventDefault(),window.location.href=`./createProduct.html?id=${e.id}`})),l.addEventListener("click",(async t=>{t.preventDefault(),await async function(e,t){await o.deleteDoc(o.doc(e,"products",t))}(r.db,e.id),b()})))}function y(){const e=p.value,t=m.value,n=_.value;let c=[];c=""!==e?g.filter((t=>t.category===e)):g,"asc"===t&&(c=c.sort(((e,t)=>t.price-e.price))),"desc"===t&&(c=c.sort(((e,t)=>e.price-t.price))),"mp"===n&&(c=c.sort(((e,t)=>t.review-e.review))),"lp"===n&&(c=c.sort(((e,t)=>e.review-t.review))),u.innerHTML="",c.forEach((e=>{h(e)}))}p.addEventListener("change",(e=>{y()})),m.addEventListener("change",(e=>{y()})),_.addEventListener("change",(e=>{y()})),d.onAuthStateChanged(r.auth,(async e=>{e?(s.getUser(e.uid).then((e=>{f=e,f.isAdmin&&function(){const e=document.createElement("button");e.classList="btn__add",e.id="btn__addProduct",e.innerHTML="+",l.appendChild(e),e.addEventListener("click",(()=>{window.location.href="createProduct.html"}))}(),b()})),v=await a.getFirebaseCart(r.db,e.uid)):v=i.getMyLocalCart(),b()}));
//# sourceMappingURL=shop.ff18acee.js.map
