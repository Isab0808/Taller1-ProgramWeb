var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},r=e.parcelRequire0c07;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var c={id:e,exports:{}};return t[e]=c,r.call(c.exports,c,c.exports),c.exports}var d=new Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(e,t){n[e]=t},e.parcelRequire0c07=r);var c=r("2mFfu"),d=r("1tHc5"),o=r("etBjH");var a=r("1ZESu"),i=r("7Jg0N"),s=r("aWEll"),u=r("3iQ2G");const l=document.getElementById("products"),p=document.getElementById("extra"),m=document.getElementById("category"),_=document.getElementById("order"),f=document.getElementById("order-review");let g,v=[],b=[];async function h(){const e=await async function(e){const t=o.collection(e,"products");try{const{docs:e}=await o.getDocs(t);return e.map((e=>({...e.data(),id:e.id})))}catch(e){console.log(e)}}(c.db);l.innerHTML="",e.forEach((e=>{y(e)})),v=e}function y(e){const t=document.createElement("a");t.className="product",t.setAttribute("href",`./product.html?id=${e.id}`);const n=e.images?e.images[0]:"https://cdn1.iconfinder.com/data/icons/business-company-1/500/image-512.png",r=b.some((t=>t.id===e.id))?'<button class="product__cart" disabled>Producto a単adido</button>':'<button class="product__cart">A単adir al carrito</button>';t.innerHTML=`\n    <img src="${n}" alt="" class="product__image">\n    <div class="product__info">\n        <p class="product__category">${e.category}</p> \n        <h2 class="product__name">${e.name}</h2>\n        <p class="product__review"> Review: ${e.review}</p> \n        <h3 class="product__price">${i.currencyFormat(e.price)}</h3>\n        ${g&&g.isAdmin?'<button class="product__edit" >Editar Producto</button> <button class="product__cart" disabled>Producto a単adido</button>':r}\n        ${g&&g.isAdmin?'<button class="product__delete">X</button>':""}\n    </div>\n    `,l.appendChild(t);const d=t.querySelector(".product__cart"),o=t.querySelector(".product__edit"),u=t.querySelector(".product__delete");d.addEventListener("click",(async t=>{t.preventDefault(),b.push(e),i.addProductToCart(b),g&&await a.createFirebaseCart(c.db,g.uid,b),d.setAttribute("disabled",!0),d.innerText="Producto a単adido"})),g&&g.isAdmin&&(o.addEventListener("click",(async t=>{t.preventDefault(),window.location.href=`./createProduct.html?id=${e.id}`})),u.addEventListener("click",(async t=>{t.preventDefault(),await s.removeProduct(c.db,e.id),h()})))}function w(){const e=m.value,t=_.value,n=f.value;let r=[];r=""!==e?v.filter((t=>t.category===e)):v,"asc"===t&&(r=r.sort(((e,t)=>t.price-e.price))),"desc"===t&&(r=r.sort(((e,t)=>e.price-t.price))),"mp"===n&&(r=r.sort(((e,t)=>t.review-e.review))),"lp"===n&&(r=r.sort(((e,t)=>e.review-t.review))),l.innerHTML="",r.forEach((e=>{y(e)}))}m.addEventListener("change",(e=>{w()})),_.addEventListener("change",(e=>{w()})),f.addEventListener("change",(e=>{w()})),d.onAuthStateChanged(c.auth,(async e=>{e?(u.getUser(e.uid).then((e=>{g=e,g.isAdmin&&function(){const e=document.createElement("button");e.classList="btn__add",e.id="btn__addProduct",e.innerHTML="+",p.appendChild(e),e.addEventListener("click",(()=>{window.location.href="createProduct.html"}))}(),h()})),b=await a.getFirebaseCart(c.db,e.uid)):b=i.getMyLocalCart(),h()}));
//# sourceMappingURL=shop.90d7fd98.js.map
