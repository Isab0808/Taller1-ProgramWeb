{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,mCAIA,MAAMC,EAAqBC,SAASC,eAAe,WAC7CC,EAAuBF,SAASC,eAAe,iBASrDE,eAAeC,EAASC,GAEpB,MAAMC,QAAaC,EAAAC,QAAQH,GACrBI,QAAmBF,EAAAG,cAAcL,IAW3C,SAAoBM,GAChBZ,EAAmBa,UAAY,mCAKlCD,EAAAE,4CAEQF,EAAAG,wEAZLC,CALa,IACNT,EACHU,GAAIX,IAIKI,EAkBRQ,SAAAC,IAELhB,EAA0CiB,qBAW9BC,SAITF,EAAAlB,SAAAqB,cAED,YACFH,EAAAI,UAAa,QAEhBJ,EAAAN,UAAA,4EAMOQ,EAAAJ,wCAGoBI,EAAGG,gWA7BeC,CAAAN","sources":["scripts/profile.js"],"sourcesContent":["import { db, auth } from \"./app\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport {getUser, getUserOrders} from \"./getUser\";\r\n\r\nconst productInfoArticle = document.getElementById(\"profile\");\r\nconst productOrdersArticle = document.getElementById(\"profileOrders\");\r\n\r\nfunction getParam(param){\r\n    const url = window.location.search;\r\n    const searchParams = new URLSearchParams(url);\r\n    const productId = searchParams.get(param);\r\n    return productId;\r\n}\r\n\r\nasync function loadUser(userId){\r\n    \r\n    const data = await getUser(userId);\r\n    const dataOrders = await getUserOrders(userId);\r\n\r\n    const user = {\r\n        ...data,\r\n        id: userId,\r\n    }\r\n\r\n    renderUser(user);\r\n    renderOrders(dataOrders);\r\n}\r\n\r\nfunction renderUser(user){\r\n    productInfoArticle.innerHTML = `\r\n    <h1 class=\"profile__name\">${user.name}</h1>\r\n    <p class=\"profile__email\">${user.email}</p>\r\n    <h2 class=\"profile__orders\"> Order History </h2>\r\n    `;\r\n}\r\n\r\nfunction renderOrders(orders){\r\n    orders.forEach(order => {\r\n        productOrdersArticle.appendChild(renderOrder(order));\r\n    })\r\n    \r\n}\r\n\r\nfunction renderOrder(item){\r\n\r\n    const order = document.createElement(\"a\");\r\n    order.className = \"order\";\r\n\r\n    \r\n    order.innerHTML = `\r\n    <h2 class=\"order__title\">Order Info</h2>\r\n    <p class=\"order__id\">${item.id}</p>\r\n    <p class=\"order__total\"> ${item.total} </p>\r\n    <h2 class=\"order__details\">Order Products</h2>\r\n    <section class=\"order__products\" id=\"order__products__${item.id}\">\r\n    ${item.cart.map(item => {\r\n        return `<div class=\"order__product\">\r\n            <h3 class=\"order__product__name\">${item.name}</h3>\r\n            <p class=\"order__product__price\">${item.price}</p>\r\n        </div>`\r\n    })}\r\n    </section>\r\n    `;\r\n    return order;\r\n    \r\n}\r\n\r\n\r\n\r\nonAuthStateChanged(auth, async (user) => {\r\n    if(user) {\r\n        loadUser(user.uid);\r\n\r\n    } else{\r\n        window.location.href = \"login.html\"\r\n    }\r\n})"],"names":["$2mFfu","parcelRequire","$095c3c4728a59b4f$var$productInfoArticle","document","getElementById","$095c3c4728a59b4f$var$productOrdersArticle","async","$095c3c4728a59b4f$var$loadUser","userId","data","$3iQ2G","getUser","dataOrders","getUserOrders","user","innerHTML","name","email","$095c3c4728a59b4f$var$renderUser","id","forEach","order","appendChild","item1","createElement","className","total","$095c3c4728a59b4f$var$renderOrder"],"version":3,"file":"profile.77185dd1.js.map"}