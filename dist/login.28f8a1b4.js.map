{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,mCAKA,MAAMC,EAAiBC,SAASC,eAAe,kBACzCC,EAAYF,SAASC,eAAe,aAEpCE,EAAcH,SAASC,eAAe,eACtCG,EAAeJ,SAASC,eAAe,gBAEvCI,EAAeL,SAASC,eAAe,uBACvCK,EAAeN,SAASC,eAAe,sBAG7CF,EAAeQ,iBAAiB,UAAUC,MAAOC,IAC7CA,EAAEC,iBAEF,MAAMC,EAAOZ,EAAeY,KAAKC,MAI3BC,EAAW,MACbF,QAJUZ,EAAee,MAAMF,eAClBb,EAAegB,SAASH,MAMrCI,SAAS,GAGPC,QA8BVT,eAA0BU,GA3D1BJ,MA2DkCA,EA3DlCC,SA2DyCA,IACrC,IACI,MA7DRI,KA6DgBA,SAAeC,EAAAC,+BAA+BH,EAAMJ,EAAOC,GACnE,OAAOI,EACT,MAAMV,GAEO,uBAAXA,EAAEa,MACDC,MAAM,kDAGI,8BAAXd,EAAEa,MACDC,MAAM,uCAzCWC,CAAW3B,EAAAqB,KAAML,SAuD1CL,eAAiCiB,EAAIC,EAAQb,EAAW,IACpD,UACUc,EAAAC,OAAOD,EAAAE,IAAIJ,EAAI,QAASC,GAASb,GACzC,MAAOJ,GACLqB,QAAQC,IAAItB,IA1DXuB,CAAkBnC,EAAA4B,GAAIR,EAAQgB,IAAKpB,GAEzCU,MAAM,eAAeZ,QAIzBT,EAAUK,iBAAiB,UAAUE,IACjCA,EAAEC,iBAEF,MAAMI,EAAQZ,EAAUY,MAAMF,MACxBG,EAAWb,EAAUa,SAASH,OAmCvCJ,eAAqBU,EAAMJ,EAAOC,GAC9B,IACI,MA7ETI,KA6EiBA,SAAeC,EAAAc,2BAA2BhB,EAAMJ,EAAOC,GAC/DQ,MAAM,uBAAuBJ,EAAKL,SACpC,MAAML,GACJc,MAAM,oCAtCXY,CAAMtC,EAAAqB,KAAMJ,EAAOC,MAGvBZ,EAAYI,iBAAiB,SAAS,KAClCuB,QAAQC,IAAI,qBACZzB,EAAa8B,UAAUC,IAAI,UAC3BhC,EAAa+B,UAAUE,OAAO,aAGlClC,EAAaG,iBAAiB,SAAS,KACnCuB,QAAQC,IAAI,gBACZzB,EAAa8B,UAAUE,OAAO,UAC9BjC,EAAa+B,UAAUC,IAAI","sources":["scripts/login.js"],"sourcesContent":["import { db, auth } from \"./app\";\r\n\r\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc, setDoc } from \"firebase/firestore\";\r\n\r\nconst createUserForm = document.getElementById(\"createUserForm\");\r\nconst loginForm = document.getElementById(\"loginForm\");\r\n\r\nconst changeLogin = document.getElementById(\"changeLogin\");\r\nconst changeSignin = document.getElementById(\"changeSignin\");\r\n\r\nconst siginArticle = document.getElementById(\"login__form--create\");\r\nconst loginArticle = document.getElementById(\"login__form--login\");\r\n\r\n\r\ncreateUserForm.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n\r\n    const name = createUserForm.name.value;\r\n    const email = createUserForm.email.value;\r\n    const password = createUserForm.password.value;\r\n\r\n    const userInfo = {\r\n        name,\r\n        email,\r\n        password,\r\n        isAdmin: false,\r\n    };\r\n\r\n    const newUser = await createUser(auth, userInfo);\r\n    await addUserToDatabase(db, newUser.uid, userInfo);\r\n\r\n    alert(`Bienvenido, ${name}`);\r\n    // window.location.href = \"/products.html\";\r\n});\r\n\r\nloginForm.addEventListener(\"submit\", e => {\r\n    e.preventDefault();\r\n\r\n    const email = loginForm.email.value;\r\n    const password = loginForm.password.value;\r\n\r\n    login(auth, email, password);\r\n});\r\n\r\nchangeLogin.addEventListener(\"click\", () => {\r\n    console.log(\"click changeLogin\");\r\n    loginArticle.classList.add(\"hidden\");\r\n    siginArticle.classList.remove(\"hidden\");\r\n})\r\n\r\nchangeSignin.addEventListener(\"click\", () => {\r\n    console.log(\"click signIn\")\r\n    loginArticle.classList.remove(\"hidden\");\r\n    siginArticle.classList.add(\"hidden\");\r\n})\r\n\r\n\r\n\r\nasync function createUser(auth, { email, password }) {\r\n    try {\r\n        const { user } = await createUserWithEmailAndPassword(auth, email, password);\r\n        return user;\r\n    } catch(e) {\r\n \r\n     if(e.code === \"auth/weak-password\") {\r\n         alert(\"Tu contraseña debe tener al menos 6 caracteres\");\r\n     }\r\n \r\n     if(e.code === \"auth/email-already-in-use\") {\r\n         alert(\"Este correo ya se encuentra en uso\");\r\n     }\r\n    }\r\n }\r\n \r\n async function login(auth, email, password) {\r\n     try {\r\n         const { user } = await signInWithEmailAndPassword(auth, email, password);\r\n         alert(`Bienvenido, usuario ${user.email}`);\r\n     } catch(e) {\r\n         alert(\"Correo o contraseña inválida :(\");\r\n     }\r\n }\r\n\r\n async function addUserToDatabase(db, userId, userInfo = {}) {\r\n     try {\r\n         await setDoc(doc(db, \"users\", userId), userInfo)\r\n     } catch (e) {\r\n         console.log(e);\r\n     }\r\n }\r\n\r\n export {\r\n     createUser,\r\n     login,\r\n     addUserToDatabase\r\n }"],"names":["$2mFfu","parcelRequire","$d70a67664903bd1f$var$createUserForm","document","getElementById","$d70a67664903bd1f$var$loginForm","$d70a67664903bd1f$var$changeLogin","$d70a67664903bd1f$var$changeSignin","$d70a67664903bd1f$var$siginArticle","$d70a67664903bd1f$var$loginArticle","addEventListener","async","e","preventDefault","name","value","userInfo","email","password","isAdmin","newUser","auth","user","$1tHc5","createUserWithEmailAndPassword","code","alert","$d70a67664903bd1f$export$3493b8991d49f558","db","userId","$etBjH","setDoc","doc","console","log","$d70a67664903bd1f$export$9f9c8eae0fddfad1","uid","signInWithEmailAndPassword","$d70a67664903bd1f$export$596d806903d1f59e","classList","add","remove"],"version":3,"file":"login.28f8a1b4.js.map"}