{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,mCAIA,MAAMC,EAAqBC,SAASC,eAAe,WAC7CC,EAAuBF,SAASC,eAAe,iBAGrD,IAAIE,EAGJC,eAAeC,EAASC,GAEpB,MAAMC,QAAaC,EAAAC,QAAQH,GACrBI,QAAmBF,EAAAG,cAAcL,EAAOC,EAAKK,UAWvD,SAAoBC,GAChBd,EAAmBe,UAAY,mCAKlCD,EAAAE,4CAEQF,EAAAG,wEAZLC,CALa,IACNV,EACHW,GAAIZ,IAIKI,EAkBRS,SAAAC,IAELlB,EAA0CmB,qBAUvBC,SAWfF,EAAQpB,SAAAuB,cAAA,OAITC,UAAA,QAGH,MAAAC,EAAa,yEAEhBH,EAAAG,SAAAV,KAAA,IAAAO,EAAAG,SAAAC,sEAIDJ,EAAmBG,SAAAE,0EACNL,EAAAG,SAAAG,+CAID,yIAMVN,EAAAJ,kdA7C4CW,CAAAT","sources":["scripts/profile.js"],"sourcesContent":["import { db, auth } from \"./app\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport {getUser, getUserOrders} from \"./getUser\";\r\n\r\nconst productInfoArticle = document.getElementById(\"profile\");\r\nconst productOrdersArticle = document.getElementById(\"profileOrders\");\r\n\r\n\r\nlet userLogged = undefined;\r\n\r\n\r\nasync function loadUser(userId){\r\n    \r\n    const data = await getUser(userId);\r\n    const dataOrders = await getUserOrders(userId,data.isAdmin);\r\n\r\n    const user = {\r\n        ...data,\r\n        id: userId,\r\n    }\r\n\r\n    renderUser(user);\r\n    renderOrders(dataOrders);\r\n}\r\n\r\nfunction renderUser(user){\r\n    productInfoArticle.innerHTML = `\r\n    <h1 class=\"profile__name\">${user.name}</h1>\r\n    <p class=\"profile__email\">${user.email}</p>\r\n    <h2 class=\"profile__orders\"> Order History </h2>\r\n    `;\r\n}\r\n\r\nfunction renderOrders(orders){\r\n    orders.forEach(order => {\r\n        productOrdersArticle.appendChild(renderOrder(order));\r\n    })\r\n    \r\n}\r\n\r\nfunction renderOrder(item){\r\n\r\n    const order = document.createElement(\"a\");\r\n    order.className = \"order\";\r\n\r\n    const userInfo = `<div id=\"shopper>\r\n    <p class=\"order__id\"><strong>Nombre: </strong> ${item.userInfo.name + \" \" + item.userInfo.lastname}</p>\r\n    <p class=\"order__total\"><strong>Lugar: </strong> ${item.userInfo.country} </p>\r\n    <p class=\"order__total\"><strong>Direcci√≥n: </strong> ${item.userInfo.address} </p>\r\n\r\n    </div`;\r\n    \r\n    order.innerHTML = `\r\n    <div class=\"order__info\">\r\n        <h2 class=\"order__title\">Order Info</h2>\r\n        <p class=\"order__id\"><strong>ID: </strong> ${item.id}</p>\r\n        <p class=\"order__total\"><strong>Total: </strong> ${item.total} </p>\r\n        ${userLogged && userLogged.isAdmin? userInfo : \"\"}\r\n    </div>\r\n\r\n    <section class=\"order__products\" id=\"order__products__${item.id}\">\r\n    <h2 class=\"order__details\">Order Products</h2>\r\n    ${item.cart.map(item => {\r\n        return `<div class=\"order__product\">\r\n            <h3 class=\"order__product__name\">${item.name}</h3>\r\n            <p class=\"order__product__price\">${item.price}</p>\r\n        </div>`\r\n    })}\r\n    </section>\r\n    `;\r\n    return order;\r\n    \r\n}\r\n\r\n\r\n\r\nonAuthStateChanged(auth, async (user) => {\r\n    if(user) {\r\n        loadUser(user.uid);\r\n\r\n        getUser(user.uid).then(user=>{\r\n            userLogged = user;\r\n            \r\n        });\r\n    } else{\r\n        window.location.href = \"./login.html\"\r\n    }\r\n})"],"names":["$2mFfu","parcelRequire","$095c3c4728a59b4f$var$productInfoArticle","document","getElementById","$095c3c4728a59b4f$var$productOrdersArticle","$095c3c4728a59b4f$var$userLogged","async","$095c3c4728a59b4f$var$loadUser","userId","data","$3iQ2G","getUser","dataOrders","getUserOrders","isAdmin","user","innerHTML","name","email","$095c3c4728a59b4f$var$renderUser","id","forEach","order","appendChild","item1","createElement","className","userInfo","lastname","country","address","$095c3c4728a59b4f$var$renderOrder"],"version":3,"file":"profile.0f20c955.js.map"}